<script type="text/javascript">
    RED.nodes.registerType('FP-Enroll',{
        category: 'function',
        color: '#a6bbcf',
        defaults: {
            name: {value:""},
            device: {value:""}
        },
        inputs:1,
        outputs:3,
        icon: "",
        label: function() {
            return this.name||"enroll";
        },
        oneditprepare: function() {
            var node = this;
            $.ajax({
                url: "fingerprint/devices",
                type: "POST",
                success: function(resp, textStatus, xhr) {
                    if (xhr.status == 200) {
                        var option;
                        $("#node-input-device").empty();
                        $("#node-input-device").append(new Option("Autoselect First Reader", ""));
                        for(var i = 0; i < resp.length; i++) {
                            option = new Option(resp[i], resp[i]);
                            if(node.device == resp[i])
                                $(option).attr('selected', true);
                            $("#node-input-device").append(option);
                        }
                    }
                },
            });
        }
    });
</script>
<script type="text/x-red" data-template-name="FP-Enroll">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-device"><i class="icon-tag"></i> Device</label>
        <select id="node-input-device">
        </select>
    </div>
</script>
<script type="text/x-red" data-help-name="FP-Enroll">
    <p></p>
</script>


<script type="text/javascript">
    RED.nodes.registerType('FP-Verify',{
        category: 'function',
        color: '#a6bbcf',
        defaults: {
            name: {value:""},
            device: {value:""}
        },
        inputs:1,
        outputs:3,
        icon: "",
        label: function() {
            return this.name||"verify";
        },
        oneditprepare: function() {
            var node = this;
            $.ajax({
                url: "fingerprint/devices",
                type: "POST",
                success: function(resp, textStatus, xhr) {
                    if (xhr.status == 200) {
                        var option;
                        $("#node-input-device").empty();
                        $("#node-input-device").append(new Option("Autoselect First Reader", ""));
                        for(var i = 0; i < resp.length; i++) {
                            option = new Option(resp[i], resp[i]);
                            if(node.device == resp[i])
                                $(option).attr('selected', true);
                            $("#node-input-device").append(option);
                        }
                    }
                },
            });
        }
    });
</script>
<script type="text/x-red" data-template-name="FP-Verify">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-device"><i class="icon-tag"></i> Device</label>
        <select id="node-input-device">
                    <option value="">Autoselect First Reader</option>
        </select>
    </div>
</script>
<script type="text/x-red" data-help-name="FP-Verify">
    <p></p>
</script>


<script type="text/javascript">
    RED.nodes.registerType('FP-Identify',{
        category: 'function',
        color: '#a6bbcf',
        defaults: {
            name: {value:""},
            device: {value:""}
        },
        inputs:1,
        outputs:3,
        icon: "",
        label: function() {
            return this.name||"identify";
        },
        oneditprepare: function() {
            var node = this;
            $.ajax({
                url: "fingerprint/devices",
                type: "POST",
                success: function(resp, textStatus, xhr) {
                    if (xhr.status == 200) {
                        var option;
                        $("#node-input-device").empty();
                        $("#node-input-device").append(new Option("Autoselect First Reader", ""));
                        for(var i = 0; i < resp.length; i++) {
                            option = new Option(resp[i], resp[i]);
                            if(node.device == resp[i])
                                $(option).attr('selected', true);
                            $("#node-input-device").append(option);
                        }
                    }
                },
            });
        }
    });
</script>
<script type="text/x-red" data-template-name="FP-Identify">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-device"><i class="icon-tag"></i> Device</label>
        <select id="node-input-device">
            <option value="">Autoselect First Reader</option>
        </select>
    </div>
</script>
<script type="text/x-red" data-help-name="FP-Identify">
    <p></p>
</script>


<script type="text/javascript">
    RED.nodes.registerType('FP-Cancel',{
        category: 'function',
        color: '#a6bbcf',
        defaults: {
            name: {value:""},
            device: {value:""}
        },
        inputs:1,
        outputs:0,
        icon: "",
        label: function() {
            return this.name||"cancel";
        },
    });
</script>
<script type="text/x-red" data-template-name="FP-Cancel">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>
<script type="text/x-red" data-help-name="FP-Cancel">
    <p></p>
</script>
